<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>性能优化</title>
</head>
<body>
  <h1>前端性能优化随笔</h1>

  <div>
    1.使用事件委托(事件代理)
    (动态绑定事件，减少重复绑定事件工作，减少页面所需内存)
    (适合事件委托的事件有：click，mousedown，mouseup，keydown，keyup，keypress)
  </div>
  <div>
    2.预加载
    `link rel="preload" href="style.css" as="style"`(as属性可以指定预加载的类型，除了style还支持很多类型，常用的一般是style和script)
    (prefetch: 通常用在这个资源可能会在用户接下来访问的页面中出现的时候)
    `script src="main.js" async`(当js下载完成后会立即(尽快)执行，多条js可以并行下载)
    `script src="main.js" defer`(会等待解析完整HTML之后在开始执行，而且多条defer标记的js会按照顺序执行)
  </div>
  <div>
    3.图片视频等采用懒加载，缓存，OSS等等
  </div>
  <div>
    4.Tree-shaking
    例子：lodash默认是CommonJS的形式，使用常规的方法import { cloneDeep } from 'lodash'导入后，webpack会把整个lodash打包进来
    可以：import cloneDeep from 'lodash/cloneDeep'或者import { cloneDeep } from 'lodash-es'
  </div>
  <div>
    5.前端DNS缓存
    在html页面头部写入dns缓存地址,如：
    <!-- <meta http-equiv="x-dns-prefetch-control" content="on" /> -->
    <!-- <link rel="dns-prefetch" href="http://bdimg.share.baidu.com" /> -->
  </div>
  <div>
    6.页面渲染优化
    HTML文档结构层次尽量少，最好不深于六层；
    脚本尽量后放，放在前即可；
    少量首屏样式内联放在标签内；
    样式结构层次尽量简单；
    在脚本中尽量减少DOM操作，尽量缓存访问DOM的样式信息，避免过度触发回流；
    减少通过JavaScript代码修改元素样式，尽量使用修改class名方式操作样式或动画；
    动画尽量使用在绝对定位或固定定位的元素上；
    隐藏在屏幕外，或在页面滚动时，尽量停止动画；
    尽量缓存DOM查找，查找器尽量简洁；
    涉及多域名的网站，可以开启域名预解析
  </div>

</body>
</html>